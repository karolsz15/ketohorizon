// Translations
const resources = {
    en: {
        translation: {
            "navigation": {
                "home": "Home",
                "articles": "Articles",
                "recipes": "Recipes",
                "ebooks": "Ebooks"
            },
            "hero": {
                "title": "Discover the Power of Keto",
                "subtitle": "Transform your health with our expert guidance and resources. Start your ketogenic journey today.",
                "cta": "Get Started"
            },
            "articles": {
                "title": "Keto Articles & Guides",
                "subtitle": "Expert insights and comprehensive guides for your ketogenic journey",
                "categories": {
                    "title": "Categories",
                    "basics": "Ketogenic Basics",
                    "recipes": "Recipes",
                    "benefits": "Health Benefits",
                    "success": "Success Stories",
                    "mistakes": "Common Mistakes"
                }
            },
            "recipes": {
                "title": "Keto Recipes",
                "subtitle": "Delicious and easy ketogenic recipes for every meal"
            },
            "ebooks": {
                "title": "Ketogenic Diet Ebooks",
                "subtitle": "Comprehensive guides to transform your health",
                "offer": {
                    "title": "Special Offer!",
                    "description": "Purchase both ebooks together and receive a 25% discount! Please visit our secure checkout portal.",
                    "button": "Get Bundle Deal"
                },
                "essentials": {
                    "title": "Keto Essentials",
                    "description": "Discover the fundamental principles of the ketogenic diet and learn how to successfully transition to a low-carb lifestyle.",
                    "price": "$29.99",
                    "button": "Purchase Now"
                },
                "advanced": {
                    "title": "Advanced Keto",
                    "description": "Take your ketogenic journey to the next level with advanced strategies, meal planning, and optimization techniques.",
                    "price": "$39.99",
                    "button": "Purchase Now"
                },
                "science": {
                    "title": "The Science of Keto: Understanding the Why Behind the Diet",
                    "description": "A deep dive into the biology and science of ketosis, fat adaptation, ketone production, and how keto affects metabolism, brain health, and hormones.",
                    "features": {
                        "metabolism": "Detailed explanations of ketone metabolism",
                        "brain": "Brain health and cognitive benefits",
                        "hormones": "Hormonal impacts and adaptations",
                        "research": "Scientific research references"
                    },
                    "buy": "Buy Now"
                },
                "mealprep": {
                    "title": "Keto Meal Prep Made Easy: 4 Weeks of Done-for-You Plans",
                    "description": "A practical ebook for busy people featuring batch-cooking, weekly shopping lists, and time-saving strategies to stay in ketosis without stress.",
                    "features": {
                        "plans": "4 weeks of detailed meal plans",
                        "shopping": "Complete shopping lists",
                        "cooking": "Batch cooking guides",
                        "strategies": "Time-saving prep strategies"
                    },
                    "buy": "Buy Now"
                }
            },
            "features": {
                "title": "Why Choose KetoElevate?",
                "cards": {
                    "nutrition": {
                        "title": "Nutritional Benefits",
                        "description": "Discover how a ketogenic diet can put your body in ketosis and start burning fat effectively for sustainable weight loss."
                    },
                    "guides": {
                        "title": "Comprehensive Guides",
                        "description": "Access our extensive collection of articles and resources to guide your keto journey every step of the way."
                    },
                    "success": {
                        "title": "Success Stories",
                        "description": "Read about the amazing transformations our community members have achieved with their ketogenic lifestyle."
                    }
                }
            },
            "success_stories": {
                "title": "Success Stories",
                "stories": {
                    "sarah": {
                        "name": "Sarah's Transformation",
                        "quote": "KetoElevate changed my life. I've lost 50 pounds and feel more energetic than ever!"
                    },
                    "mike": {
                        "name": "Mike's Journey",
                        "quote": "The recipes are fantastic, and the community support is incredible. Highly recommend!"
                    },
                    "emma": {
                        "name": "Emma's Success",
                        "quote": "I never thought I could feel this good. Keto has been a game-changer for my health."
                    }
                }
            },
            "latest_articles": {
                "title": "Latest Articles",
                "articles": {
                    "essentials": {
                        "title": "The Essentials of a Ketogenic Diet",
                        "description": "Discover the fundamental principles of a ketogenic diet and how it can transform your health.",
                        "cta": "Read More"
                    },
                    "ingredients": {
                        "title": "Top 10 Keto-Friendly Ingredients",
                        "description": "Learn about the top ingredients that should be part of your ketogenic kitchen essentials.",
                        "cta": "Read More"
                    },
                    "recipes": {
                        "title": "Keto Recipes for Beginners",
                        "description": "Get started with these easy and delicious recipes that are perfect for new keto dieters.",
                        "cta": "Read More"
                    }
                }
            },
            "footer": {
                "quick_links": {
                    "title": "Quick Links",
                    "home": "Home",
                    "articles": "Articles",
                    "recipes": "Recipes",
                    "ebooks": "Ebooks"
                },
                "about": {
                    "title": "About Us",
                    "description": "KetoElevate is dedicated to providing expert guidance and resources for those interested in the ketogenic lifestyle. Our mission is to help you transform your health and achieve your weight loss goals."
                },
                "contact": {
                    "title": "Contact",
                    "email": "Email: info@ketoelevate.com",
                    "phone": "Phone: 555-1234"
                },
                "copyright": "© 2023 KetoElevate. All rights reserved."
            }
        }
    },
    es: {
        translation: {
            "navigation": {
                "home": "Inicio",
                "articles": "Artículos",
                "recipes": "Recetas",
                "ebooks": "Libros"
            },
            "hero": {
                "title": "Descubre el Poder de Keto",
                "subtitle": "Transforma tu salud con nuestra guía experta y recursos. Comienza tu viaje cetogénico hoy.",
                "cta": "Comenzar"
            },
            "articles": {
                "title": "Artículos y Guías Keto",
                "subtitle": "Conocimientos expertos y guías completas para tu viaje cetogénico",
                "categories": {
                    "title": "Categorías",
                    "basics": "Fundamentos Cetogénicos",
                    "recipes": "Recetas",
                    "benefits": "Beneficios para la Salud",
                    "success": "Historias de Éxito",
                    "mistakes": "Errores Comunes"
                }
            },
            "recipes": {
                "title": "Recetas Keto",
                "subtitle": "Recetas cetogénicas deliciosas y fáciles para cada comida"
            },
            "ebooks": {
                "title": "Libros Electrónicos de Dieta Cetogénica",
                "subtitle": "Guías completas para transformar tu salud",
                "offer": {
                    "title": "¡Oferta Especial!",
                    "description": "¡Compra ambos libros juntos y recibe un 25% de descuento! Visita nuestro portal seguro de pago.",
                    "button": "Obtener Oferta"
                },
                "essentials": {
                    "title": "Fundamentos Keto",
                    "description": "Descubre los principios fundamentales de la dieta cetogénica y aprende cómo hacer la transición exitosa a un estilo de vida bajo en carbohidratos.",
                    "price": "29,99€",
                    "button": "Comprar Ahora"
                },
                "advanced": {
                    "title": "Keto Avanzado",
                    "description": "Lleva tu viaje cetogénico al siguiente nivel con estrategias avanzadas, planificación de comidas y técnicas de optimización.",
                    "price": "39,99€",
                    "button": "Comprar Ahora"
                },
                "science": {
                    "title": "La Ciencia del Keto: Entendiendo el Por Qué de la Dieta",
                    "description": "Una inmersión profunda en la biología y la ciencia de la cetosis, la adaptación a las grasas, la producción de cetonas y cómo el keto afecta el metabolismo, la salud cerebral y las hormonas.",
                    "features": {
                        "metabolism": "Explicaciones detalladas del metabolismo de cetonas",
                        "brain": "Salud cerebral y beneficios cognitivos",
                        "hormones": "Impactos y adaptaciones hormonales",
                        "research": "Referencias de investigación científica"
                    },
                    "buy": "Comprar Ahora"
                },
                "mealprep": {
                    "title": "Preparación de Comidas Keto Simplificada: 4 Semanas de Planes Listos",
                    "description": "Un libro electrónico práctico para personas ocupadas que incluye cocina por lotes, listas de compras semanales y estrategias para ahorrar tiempo y mantener la cetosis sin estrés.",
                    "features": {
                        "plans": "4 semanas de planes detallados de comidas",
                        "shopping": "Listas de compras completas",
                        "cooking": "Guías de cocina por lotes",
                        "strategies": "Estrategias para ahorrar tiempo"
                    },
                    "buy": "Comprar Ahora"
                }
            },
            "features": {
                "title": "¿Por qué elegir KetoElevate?",
                "cards": {
                    "nutrition": {
                        "title": "Beneficios Nutricionales",
                        "description": "Descubre cómo una dieta cetogénica puede poner tu cuerpo en cetosis y comenzar a quemar grasa de manera efectiva para una pérdida de peso sostenible."
                    },
                    "guides": {
                        "title": "Guías Completas",
                        "description": "Accede a nuestra extensa colección de artículos y recursos para guiar tu viaje cetogénico en cada paso del camino."
                    },
                    "success": {
                        "title": "Historias de Éxito",
                        "description": "Lee sobre las increíbles transformaciones que nuestros miembros han logrado con su estilo de vida cetogénico."
                    }
                }
            },
            "success_stories": {
                "title": "Historias de Éxito",
                "stories": {
                    "sarah": {
                        "name": "La Transformación de Sarah",
                        "quote": "KetoElevate cambió mi vida. ¡He perdido 23 kilos y me siento más energética que nunca!"
                    },
                    "mike": {
                        "name": "El Viaje de Mike",
                        "quote": "Las recetas son fantásticas y el apoyo de la comunidad es increíble. ¡Altamente recomendado!"
                    },
                    "emma": {
                        "name": "El Éxito de Emma",
                        "quote": "Nunca pensé que podría sentirme tan bien. Keto ha sido un cambio radical para mi salud."
                    }
                }
            },
            "latest_articles": {
                "title": "Últimos Artículos",
                "articles": {
                    "essentials": {
                        "title": "Los Fundamentos de una Dieta Cetogénica",
                        "description": "Descubre los principios fundamentales de una dieta cetogénica y cómo puede transformar tu salud.",
                        "cta": "Leer Más"
                    },
                    "ingredients": {
                        "title": "Los 10 Mejores Ingredientes Keto",
                        "description": "Aprende sobre los ingredientes principales que deberían ser parte de tu cocina cetogénica esencial.",
                        "cta": "Leer Más"
                    },
                    "recipes": {
                        "title": "Recetas Keto para Principiantes",
                        "description": "Comienza con estas recetas fáciles y deliciosas que son perfectas para quienes inician la dieta keto.",
                        "cta": "Leer Más"
                    }
                }
            },
            "footer": {
                "quick_links": {
                    "title": "Enlaces Rápidos",
                    "home": "Inicio",
                    "articles": "Artículos",
                    "recipes": "Recetas",
                    "ebooks": "Libros"
                },
                "about": {
                    "title": "Sobre Nosotros",
                    "description": "KetoElevate está dedicado a proporcionar orientación experta y recursos para aquellos interesados en el estilo de vida cetogénico. Nuestra misión es ayudarte a transformar tu salud y alcanzar tus objetivos de pérdida de peso."
                },
                "contact": {
                    "title": "Contacto",
                    "email": "Correo: info@ketoelevate.com",
                    "phone": "Teléfono: 555-1234"
                },
                "copyright": "© 2023 KetoElevate. Todos los derechos reservados."
            }
        }
    },
    zh: {
        translation: {
            "navigation": {
                "home": "首页",
                "articles": "文章",
                "recipes": "食谱",
                "ebooks": "电子书"
            },
            "hero": {
                "title": "发现生酮饮食的力量",
                "subtitle": "通过我们的专家指导和资源改变您的健康。今天就开始您的生酮之旅。",
                "cta": "开始"
            },
            "articles": {
                "title": "生酮文章和指南",
                "subtitle": "为您的生酮之旅提供专业见解和全面指导",
                "categories": {
                    "title": "分类",
                    "basics": "生酮基础",
                    "recipes": "食谱",
                    "benefits": "健康益处",
                    "success": "成功案例",
                    "mistakes": "常见错误"
                }
            },
            "recipes": {
                "title": "生酮食谱",
                "subtitle": "美味简单的生酮食谱，满足每餐需求"
            },
            "ebooks": {
                "title": "生酮饮食电子书",
                "subtitle": "全面的健康转变指南",
                "offer": {
                    "title": "特别优惠！",
                    "description": "同时购买两本电子书可享受25%折扣！请访问我们的安全支付门户。",
                    "button": "获取套餐优惠"
                },
                "essentials": {
                    "title": "生酮基础",
                    "description": "了解生酮饮食的基本原理，学习如何成功过渡到低碳水化合物的生活方式。",
                    "price": "¥199",
                    "button": "立即购买"
                },
                "advanced": {
                    "title": "生酮进阶",
                    "description": "通过高级策略、膳食计划和优化技巧，将您的生酮之旅提升到新的水平。",
                    "price": "¥269",
                    "button": "立即购买"
                },
                "science": {
                    "title": "生酮科学：了解饮食背后的原理",
                    "description": "深入探讨生酮饮食的生物学和科学原理，包括脂肪适应、酮体生成，以及生酮如何影响新陈代谢、大脑健康和激素。",
                    "features": {
                        "metabolism": "详细解释酮体代谢",
                        "brain": "大脑健康和认知益处",
                        "hormones": "激素影响和适应",
                        "research": "科学研究参考"
                    },
                    "buy": "立即购买"
                },
                "mealprep": {
                    "title": "简易生酮餐准备：4周现成计划",
                    "description": "为忙碌人士准备的实用电子书，包含批量烹饪、每周购物清单和节省时间的策略，轻松保持生酮状态。",
                    "features": {
                        "plans": "4周详细膳食计划",
                        "shopping": "完整购物清单",
                        "cooking": "批量烹饪指南",
                        "strategies": "节省时间的策略"
                    },
                    "buy": "立即购买"
                }
            },
            "features": {
                "title": "为什么选择KetoElevate？",
                "cards": {
                    "nutrition": {
                        "title": "营养效益",
                        "description": "了解生酮饮食如何让您的身体进入酮症状态，有效燃烧脂肪，实现持续减重。"
                    },
                    "guides": {
                        "title": "全面指导",
                        "description": "获取我们丰富的文章和资源，指导您的生酮之旅的每一步。"
                    },
                    "success": {
                        "title": "成功案例",
                        "description": "阅读我们社区成员通过生酮生活方式实现的惊人转变。"
                    }
                }
            },
            "success_stories": {
                "title": "成功案例",
                "stories": {
                    "sarah": {
                        "name": "Sarah的转变",
                        "quote": "KetoElevate改变了我的生活。我减掉了23公斤，感觉比以往更有活力！"
                    },
                    "mike": {
                        "name": "Mike的旅程",
                        "quote": "食谱非常棒，社区支持令人难以置信。强烈推荐！"
                    },
                    "emma": {
                        "name": "Emma的成功",
                        "quote": "我从未想过能感觉如此好。生酮饮食彻底改变了我的健康状况。"
                    }
                }
            },
            "latest_articles": {
                "title": "最新文章",
                "articles": {
                    "essentials": {
                        "title": "生酮饮食的基础知识",
                        "description": "了解生酮饮食的基本原理以及它如何改变您的健康状况。",
                        "cta": "阅读更多"
                    },
                    "ingredients": {
                        "title": "十大生酮友好食材",
                        "description": "了解应该成为您生酮厨房必备品的主要食材。",
                        "cta": "阅读更多"
                    },
                    "recipes": {
                        "title": "新手生酮食谱",
                        "description": "从这些简单美味的食谱开始，非常适合生酮饮食新手。",
                        "cta": "阅读更多"
                    }
                }
            },
            "footer": {
                "quick_links": {
                    "title": "快速链接",
                    "home": "首页",
                    "articles": "文章",
                    "recipes": "食谱",
                    "ebooks": "电子书"
                },
                "about": {
                    "title": "关于我们",
                    "description": "KetoElevate致力于为对生酮生活方式感兴趣的人提供专业指导和资源。我们的使命是帮助您改善健康状况并实现减重目标。"
                },
                "contact": {
                    "title": "联系方式",
                    "email": "邮箱：info@ketoelevate.com",
                    "phone": "电话：555-1234"
                },
                "copyright": "© 2023 KetoElevate。保留所有权利。"
            }
        }
    }
};

// Initialize i18next
i18next
    .use(i18nextBrowserLanguageDetector)
    .init({
        resources,
        fallbackLng: 'en',
        debug: true
    });

// Language selector functionality
function toggleLanguageMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    
    const menu = document.getElementById('languageMenu');
    if (!menu) {
        console.error('Language menu not found');
        return;
    }
    
    menu.classList.toggle('show');
}

function updateContent() {
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = i18next.t(key);
        if (translation) {
            element.textContent = translation;
        }
    });
}

// Handle language selection
function selectLanguage(event, lang) {
    event.preventDefault();
    i18next.changeLanguage(lang).then(() => {
        updateContent();
        localStorage.setItem('preferred-language', lang);
        
        // Update the current language display
        const langText = document.querySelector('.current-lang .lang-text');
        if (langText) {
            langText.textContent = lang.toUpperCase();
        }
        
        // Hide the menu
        const menu = document.getElementById('languageMenu');
        if (menu) {
            menu.classList.remove('show');
        }
    });
}

// Close menu when clicking outside
document.addEventListener('click', (e) => {
    const menu = document.getElementById('languageMenu');
    const langSelector = e.target.closest('.language-selector');
    
    if (!langSelector && menu && menu.classList.contains('show')) {
        menu.classList.remove('show');
    }
});

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    // Initialize with stored language first
    const storedLang = localStorage.getItem('preferred-language');
    if (storedLang) {
        i18next.changeLanguage(storedLang).then(() => {
            updateContent();
            const langText = document.querySelector('.current-lang .lang-text');
            if (langText) {
                langText.textContent = storedLang.toUpperCase();
            }
        });
    }

    // Add click event to language button
    const langButton = document.querySelector('.current-lang');
    if (langButton) {
        langButton.addEventListener('click', toggleLanguageMenu);
    }
    
    // Add click events to language options
    document.querySelectorAll('.lang-option').forEach(option => {
        option.addEventListener('click', (e) => {
            const lang = option.getAttribute('data-lang');
            selectLanguage(e, lang);
        });
    });
}); 